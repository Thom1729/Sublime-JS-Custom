%YAML 1.2
%TAG ! tag:yaml-macros:yamlmacros.lib.extend,yamlmacros.lib.arguments:
---
!merge
contexts: !merge
  object-literal:
    - match: '\{'
      scope: punctuation.section.block.js
      set:
        - meta_scope: meta.object-literal.js
        - match: '\}'
          scope: punctuation.section.block.js
          pop: true

        - match: \.\.\.
          scope: keyword.operator.spread.js
          push: literal-variable

        - match: >-
            (?x)(?=
              {{property_name}}\s*:
              (?: {{either_func_lookahead}} )
            )
          push:
            - either-function-declaration
            - function-declaration-meta
            - object-literal-expect-colon
            - object-literal-meta-key
            - method-name

        - match: '{{method_lookahead}}'
          push: method-declaration

        - match: '{{identifier}}(?=\s*(?:[},]|$|//|/\*))'
          scope: variable.other.readwrite.js
        - match: (?=\[)
          push: computed-property-name
        - match: "(?=\"|')"
          push:
            - object-literal-meta-key
            - literal-string
        - match: '{{dollar_identifier}}'
          scope: string.unquoted.js meta.object-literal.key.dollar.js
          captures:
            1: punctuation.dollar.js
        - match: '{{identifier}}'
          scope: string.unquoted.js meta.object-literal.key.js
        - match: (?=[-+]?(?:\.[0-9]|0[bxo]|\d))
          push:
            - meta_scope: meta.object-literal.key.js
            - include: literal-number

        - include: comma-separator
        - match: ':'
          scope: punctuation.separator.key-value.js
          push: expression-no-comma
