%YAML 1.2
%TAG ! tag:yaml-macros:yamlmacros.lib.extend:
---
!merge
contexts: !merge
  statements: !prepend
    - include: decorator

  class-body-contents: !prepend
    - meta_scope: meta.block.js
    - include: decorator

  decorator:
    - match: '@'
      scope: punctuation.definition.annotation.js
      push: decorator-expression

  decorator-expression:
    - meta_scope: meta.annotation.js
    - match: (?={{identifier}}\s*\.)
      push:
        - expect-dot-accessor
        - literal-variable
    - match: '{{identifier}}'
      scope: variable.annotation.js
      set:
        - include: function-call
        - include: else-pop
    - include: else-pop
